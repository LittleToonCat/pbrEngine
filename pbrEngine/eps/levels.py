# source code owned by Twitch Plays Pokemon AUTHORIZED USE ONLY see LICENSE.MD

from bisect import bisect_right


growth_rates = {
    "medium-slow": {
        "species": {1, 4, 7, 16, 29, 32, 43, 60, 63, 66, 69, 74, 3, 5, 6, 9, 17, 18, 30, 31, 33, 34, 44, 61, 62, 64, 65, 67, 68, 70, 71, 75, 76, 92, 151, 152, 155, 158, 93, 94, 153, 154, 156, 157, 159, 160, 179, 187, 191, 198, 207, 213, 215, 180, 181, 182, 186, 189, 192, 251, 252, 255, 258, 270, 273, 276, 293, 302, 328, 331, 254, 256, 257, 259, 260, 271, 272, 274, 275, 277, 294, 295, 315, 329, 330, 332, 352, 359, 363, 387, 390, 393, 396, 401, 403, 406, 415, 364, 365, 388, 389, 392, 394, 395, 397, 398, 402, 404, 405, 407, 416, 441, 447, 492, 495, 498, 501, 430, 448, 461, 472, 496, 497, 499, 502, 503, 506, 519, 524, 532, 535, 540, 543, 551, 554, 570, 574, 577, 507, 508, 520, 521, 525, 526, 533, 534, 536, 537, 542, 544, 545, 552, 553, 555, 571, 575, 576, 578, 579, 599, 607, 619, 650, 653, 656, 661, 667, 600, 601, 608, 620, 652, 654, 655, 657, 658, 662, 663, 668, 2, 8, 45, 188, 253, 391, 500, 541, 609, 651},
        "levels": (0, 9, 57, 96, 135, 179, 236, 314, 419, 560, 742, 973, 1261, 1612, 2035, 2535, 3120, 3798, 4575, 5460, 6458, 7577, 8825, 10208, 11735, 13411, 15244, 17242, 19411, 21760, 24294, 27021, 29949, 33084, 36435, 40007, 43808, 47846, 52127, 56660, 61450, 66505, 71833, 77440, 83335, 89523, 96012, 102810, 109923, 117360, 125126, 133229, 141677, 150476, 159635, 169159, 179056, 189334, 199999, 211060, 222522, 234393, 246681, 259392, 272535, 286115, 300140, 314618, 329555, 344960, 360838, 377197, 394045, 411388, 429235, 447591, 466464, 485862, 505791, 526260, 547274, 568841, 590969, 613664, 636935, 660787, 685228, 710266, 735907, 762160, 789030, 816525, 844653, 873420, 902835, 932903, 963632, 995030, 1027103, 1059860)
    },
    "fast": {
        "species": {35, 36, 39, 40, 165, 167, 113, 166, 173, 174, 175, 190, 200, 209, 222, 225, 235, 176, 183, 184, 210, 242, 298, 300, 303, 325, 327, 301, 326, 337, 338, 353, 355, 370, 354, 356, 358, 431, 433, 440, 429, 432, 468, 477, 517, 531, 572, 573, 594, 707, 168, 424, 518},
        "levels": (0, 6, 21, 51, 100, 172, 274, 409, 583, 800, 1064, 1382, 1757, 2195, 2700, 3276, 3930, 4665, 5487, 6400, 7408, 8518, 9733, 11059, 12500, 14060, 15746, 17561, 19511, 21600, 23832, 26214, 28749, 31443, 34300, 37324, 40522, 43897, 47455, 51200, 55136, 59270, 63605, 68147, 72900, 77868, 83058, 88473, 94119, 100000, 106120, 112486, 119101, 125971, 133100, 140492, 148154, 156089, 164303, 172800, 181584, 190662, 200037, 209715, 219700, 229996, 240610, 251545, 262807, 274400, 286328, 298598, 311213, 324179, 337500, 351180, 365226, 379641, 394431, 409600, 425152, 441094, 457429, 474163, 491300, 508844, 526802, 545177, 563975, 583200, 602856, 622950, 643485, 664467, 685900, 707788, 730138, 752953, 776239, 800000)
    },
    "medium": {
        "species": {10, 13, 19, 21, 23, 27, 37, 41, 46, 48, 50, 52, 54, 56, 77, 79, 81, 83, 11, 12, 14, 15, 20, 22, 24, 25, 26, 28, 38, 42, 47, 49, 51, 53, 55, 57, 78, 80, 82, 84, 86, 88, 95, 96, 98, 100, 104, 108, 109, 114, 115, 116, 118, 123, 132, 133, 137, 138, 140, 161, 163, 87, 89, 97, 105, 106, 107, 110, 117, 119, 122, 124, 125, 126, 134, 135, 136, 139, 141, 162, 164, 172, 177, 193, 194, 201, 203, 204, 206, 211, 216, 218, 223, 231, 236, 238, 239, 240, 169, 178, 185, 195, 196, 197, 199, 202, 205, 208, 212, 217, 219, 224, 230, 232, 233, 237, 261, 263, 265, 278, 283, 299, 307, 311, 312, 322, 324, 262, 264, 266, 267, 268, 269, 279, 308, 323, 339, 343, 351, 360, 361, 399, 412, 417, 340, 344, 362, 400, 413, 414, 418, 420, 422, 427, 434, 436, 438, 439, 442, 453, 479, 504, 421, 423, 428, 435, 437, 462, 463, 465, 466, 467, 469, 470, 471, 474, 476, 478, 509, 511, 513, 515, 522, 527, 529, 538, 539, 546, 548, 550, 556, 557, 559, 561, 562, 564, 566, 568, 580, 585, 587, 588, 590, 510, 512, 514, 516, 523, 528, 530, 547, 549, 558, 560, 563, 565, 569, 581, 586, 592, 595, 597, 605, 613, 615, 616, 618, 621, 622, 624, 626, 631, 632, 659, 664, 669, 672, 674, 676, 593, 596, 598, 606, 614, 617, 623, 625, 660, 665, 666, 670, 671, 673, 675, 677, 679, 682, 684, 686, 688, 690, 694, 696, 698, 701, 702, 708, 710, 712, 714, 85, 99, 101, 284, 419, 454, 505, 567, 589, 591, 678, 680, 681, 683, 685, 687, 689, 691, 695, 697, 699, 700, 709, 711, 713, 715},
        "levels": (0, 8, 27, 64, 125, 216, 343, 512, 729, 1000, 1331, 1728, 2197, 2744, 3375, 4096, 4913, 5832, 6859, 8000, 9261, 10648, 12167, 13824, 15625, 17576, 19683, 21952, 24389, 27000, 29791, 32768, 35937, 39304, 42875, 46656, 50653, 54872, 59319, 64000, 68921, 74088, 79507, 85184, 91125, 97336, 103823, 110592, 117649, 125000, 132651, 140608, 148877, 157464, 166375, 175616, 185193, 195112, 205379, 216000, 226981, 238328, 250047, 262144, 274625, 287496, 300763, 314432, 328509, 343000, 357911, 373248, 389017, 405224, 421875, 438976, 456533, 474552, 493039, 512000, 531441, 551368, 571787, 592704, 614125, 636056, 658503, 681472, 704969, 729000, 753571, 778688, 804357, 830584, 857375, 884736, 912673, 941192, 970299, 1000000)
    },
    "slow": {
        "species": {58, 72, 59, 73, 90, 102, 111, 120, 127, 128, 129, 131, 142, 144, 145, 146, 147, 150, 112, 121, 130, 143, 148, 149, 170, 214, 220, 227, 228, 234, 241, 243, 244, 245, 246, 249, 250, 171, 221, 226, 229, 247, 248, 280, 287, 304, 309, 318, 281, 282, 288, 289, 305, 306, 310, 319, 357, 369, 371, 374, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 372, 373, 375, 376, 443, 446, 449, 451, 455, 458, 459, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 493, 494, 444, 445, 450, 460, 464, 473, 475, 582, 583, 584, 602, 610, 627, 629, 633, 636, 638, 639, 640, 641, 642, 643, 644, 645, 646, 647, 648, 649, 603, 604, 611, 612, 628, 630, 634, 635, 692, 703, 704, 716, 717, 718, 719, 720, 721, 91, 103, 452, 637, 693, 705, 706},
        "levels": (0, 10, 33, 80, 156, 270, 428, 640, 911, 1250, 1663, 2160, 2746, 3430, 4218, 5120, 6141, 7290, 8573, 10000, 11576, 13310, 15208, 17280, 19531, 21970, 24603, 27440, 30486, 33750, 37238, 40960, 44921, 49130, 53593, 58320, 63316, 68590, 74148, 80000, 86151, 92610, 99383, 106480, 113906, 121670, 129778, 138240, 147061, 156250, 165813, 175760, 186096, 196830, 207968, 219520, 231491, 243890, 256723, 270000, 283726, 297910, 312558, 327680, 343281, 359370, 375953, 393040, 410636, 428750, 447388, 466560, 486271, 506530, 527343, 548720, 570666, 593190, 616298, 640000, 664301, 689210, 714733, 740880, 767656, 795070, 823128, 851840, 881211, 911250, 941963, 973360, 1005446, 1038230, 1071718, 1105920, 1140841, 1176490, 1212873, 1250000)
    },
    "slow-then-very-fast": {
        "species": {290, 313, 333, 291, 292, 335, 345, 347, 349, 366, 408, 410, 346, 348, 350, 367, 368, 409, 456, 457, 334, 411},
        "levels": (0, 15, 52, 122, 237, 406, 637, 942, 1326, 1800, 2369, 3041, 3822, 4719, 5737, 6881, 8155, 9564, 11111, 12800, 14632, 16610, 18737, 21012, 23437, 26012, 28737, 31610, 34632, 37800, 41111, 44564, 48155, 51881, 55737, 59719, 63822, 68041, 72369, 76800, 81326, 85942, 90637, 95406, 100237, 105122, 110052, 115015, 120001, 125000, 131324, 137795, 144410, 151165, 158056, 165079, 172229, 179503, 186894, 194400, 202013, 209728, 217540, 225443, 233431, 241496, 249633, 257834, 267406, 276458, 286328, 296358, 305767, 316074, 326531, 336255, 346965, 357812, 367807, 378880, 390077, 400293, 411686, 423190, 433572, 445239, 457001, 467489, 479378, 491346, 501878, 513934, 526049, 536557, 548720, 560922, 571333, 583539, 591882, 600000)
    },
    "fast-then-very-slow": {
        "species": {285, 296, 314, 316, 320, 286, 297, 317, 321, 336, 341, 342, 425, 426},
        "levels": (0, 4, 13, 32, 65, 112, 178, 276, 393, 540, 745, 967, 1230, 1591, 1957, 2457, 3046, 3732, 4526, 5440, 6482, 7666, 9003, 10506, 12187, 14060, 16140, 18439, 20974, 23760, 26811, 30146, 33780, 37731, 42017, 46656, 50653, 55969, 60505, 66560, 71677, 78533, 84277, 91998, 98415, 107069, 114205, 123863, 131766, 142500, 151222, 163105, 172697, 185807, 196322, 210739, 222231, 238036, 250562, 267840, 281456, 300293, 315059, 335544, 351520, 373744, 390991, 415050, 433631, 459620, 479600, 507617, 529063, 559209, 582187, 614566, 639146, 673863, 700115, 737280, 765275, 804997, 834809, 877201, 908905, 954084, 987754, 1035837, 1071552, 1122660, 1160499, 1214753, 1254796, 1312322, 1354652, 1415577, 1460276, 1524731, 1571884, 1640000)
    }
}

def get_experience_points(species, level):
    for growth_rate in growth_rates.values():
        if species in growth_rate["species"]:
            return growth_rate["levels"][level - 1]
    raise ValueError("Invalid specied id %d" % species)

def get_level(species, experience_points):
    for growth_rate in growth_rates.values():
        if species in growth_rate["species"]:
            return bisect_right(growth_rate["levels"], experience_points)
    raise ValueError("Invalid specied id %d" % species)

